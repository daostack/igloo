datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["orderByNulls"]
}

model Proposal {
  id                      Int             @id @default(autoincrement())
  title                   String?       
  description             String?     
  creator                 User?           @relation(fields: [creatorId], references: [address])
  creatorId               String?    
  type                    String
  step                    Int
  steps                   ProposalStep[]  // ProposalStep
  nextTransitionCheck     Int?             
}

model ProposalStep {
  @@id([proposalId, order])
  proposal                Proposal      @relation(fields: [proposalId], references: [id])
  proposalId              Int
  order                   Int
  type                    String
  params                  String?
}

model User {
  address                 String    @id
  proposals               Proposal[]
} 